**Subject: JAVA CHALLENGE**

Hello,

Please find below the mini-project to be completed.

**Objectives**

The goal of the mini-project is to develop the following APIs:

**1. User Generation**

  * method: GET
  * url: `/api/users/generate`
  * content-type: `application/json`
  * secured: no
  * parameters:
      * `count`: number

This first REST endpoint allows generating a JSON file containing `count` elements, respecting the following structure:

``` json
[{ 
  "firstName": "string", 
  "lastName": "string", 
  "birthDate": "date", 
  "city": "city", 
  "country": "iso2 code", 
  "avatar": "image url", 
  "company": "string", 
  "jobPosition": "string", 
  "mobile": "phone number", 
  "username": "login identifier", 
  "email": "email address", 
  "password": "random password between 6 and 10 characters", 
  "role": "admin or user" 
}]

```

All fields in this JSON file must be generated realistically using an appropriate Java library. Content such as "example, test, etc." is not acceptable. The `role` field must be generated by choosing between the two values: `user` or `admin`.

By entering the URL of this API in the browser (e.g., `http://localhost:9090/api/users/generate?count=100`), the download of a JSON file must be triggered. The JSON should not be displayed as text in the web browser.

**2. Upload of the user file and creation of users in the database**

  * method: POST
  * url: `/api/users/batch`
  * content-type: `multipart/form-data`
  * secured: no
  * parameters:
      * `file`: `multipart-file`

This second endpoint allows uploading the JSON file generated in \#1. The file must be imported into the database by checking for duplicates based on the email address and username (must be unique). A JSON response must be returned to summarize the total number of records, successfully imported, and not imported. Before saving to the database, the password must be encoded and not stored in plain text.

**3. User connection + JWT generation**

  * method: POST
  * url: `/api/auth`
  * content-type: `application/json`
  * request-body:
      * `username`: string
      * `password`: string

This 3rd endpoint allows authenticating a user and generating a valid JWT token. The response is a JSON respecting the following structure:

``` json
{ 
  "accessToken": "value of the JWT token" 
}

```

The generated JWT must contain the user's email. To authenticate, it is possible to enter either the `username` or the `email` contained in the imported JSON file in the `username` field.

**4. Consultation of my profile**

  * method: GET
  * url: `/api/users/me`
  * secured: yes

This 4th endpoint allows using the JWT token to securely access the associated user's profile.

**5. Consultation of a profile**

  * method: GET
  * url: `/api/users/{username}`
  * secured: yes

When the JWT used corresponds to a user with the **admin** role, it is possible to view the profile of any other user. A user without the admin role therefore cannot access another user's profile.

**Constraints**

You are asked to:

  * Complete this project using **Gradle** or **Maven**, **Java8 or higher** and the **latest version of the SpringBoot framework**.
  * The database used must be an **H2** database.
  * The application must start on port **9090**.
  * The application must start **without any manual configuration**.
  * The project must expose a **Swagger endpoint** using <https://springdoc.org/>.
  * All endpoints must be **testable from the Swagger interface**.
  * **Unit tests are highly desired** for the requested features.



//*** project structure ***//

src/main/java/com/assessment/
│
├── Application.java                    [✓ exists - main entry point]
│
├── config/                             [create this]
│   ├── FakerConfig.java               (Bean: Faker instance)
│   ├── SecurityConfig.java            (JWT filter, security rules)
│   └── OpenApiConfig.java             (Swagger customization - optional)
│
├── model/                              [✓ exists]
│   └── User.java                      [✓ entity with JPA annotations]
│
├── dto/                                [create this]
│   ├── GeneratedUser.java             (for generation endpoint response)
│   ├── BatchImportSummary.java        (batch upload result)
│   ├── LoginRequest.java              (auth request body)
│   ├── AuthResponse.java              (JWT token response)
│   └── UserProfile.java               (profile view, no password)
│
├── repository/                         [create this]
│   └── UserRepository.java            (extends JpaRepository<User, Long>)
│
├── service/                            [create this]
│   ├── UserGenerator.java             (Faker-based user creator)
│   ├── UserGenerationService.java     (generation business logic)
│   ├── UserBatchService.java          (batch import logic)
│   ├── AuthService.java               (login & JWT creation)
│   ├── UserProfileService.java        (fetch profile logic)
│   ├── JwtService.java                (token create/validate)
│   └── CustomUserDetailsService.java  (load user for Spring Security)
│
├── controller/                         [✓ exists]
│   ├── UserController.java            [✓ update endpoints]
│   └── AuthController.java            [create - for /api/auth]
│
├── security/                           [create this]
│   └── JwtAuthenticationFilter.java   (intercept requests, validate JWT)
│
└── exception/                          [create this - optional]
    ├── GlobalExceptionHandler.java    (@ControllerAdvice for clean errors)
    └── ResourceNotFoundException.java (custom exception)

src/main/resources/
├── application.properties              [✓ exists - already configured]
└── (no other files needed)

src/test/java/com/assessment/
├── service/
│   ├── UserGeneratorTest.java         (unit test for generator)
│   └── UserBatchServiceTest.java      (duplicate detection tests)
└── controller/
    ├── UserControllerTest.java        (@WebMvcTest)
    └── AuthControllerTest.java        (@WebMvcTest)